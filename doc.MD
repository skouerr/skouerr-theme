# Overview

## Introduction

Skouerr est un ensemble d‚Äôoutil pour am√©liorer l‚Äôexp√©rience d√©veloppeur lors du d√©veloppement de th√®me Wordpress.

Skouerr est n√© d‚Äôun constat dans l‚Äôagence de communication R2. L‚Äôagence reposait sur une √©quipe de d√©veloppeur en partie en freelance qui utilisait diff√©rents outils. Cela cr√©ait de la frustration et ont d√©cid√© de cr√©er une plateforme de d√©veloppement commune afin d‚Äôam√©liorer le partage des projets.

Apr√®s plusieurs phases d‚Äôit√©ration Skouerr est n√©, pour s‚Äôapp√¢ter au mieux au besoin des agences de communication qui d√©veloppent des th√®mes sur mesures pour leur client.

*Skouerr est issu du breton skouer, qui signifie mod√®le ou outil. Un nom bien trouv√© pour une agence bretonne.*

Skouerr repose sur 3 outils : 

- Une interface en ligne de commande pour g√©rer la cr√©ation d‚Äô√©l√©ments  
- Un th√®me de d√©marrage comprenant des fonctionnalit√©s pr√©vus pour am√©liorer l‚Äôexp√©rience d√©veloppeur  
- Un utilitaire javascript permettant la compilation et le raffraichissement en direct des assets

C‚Äôest un outil open-source d√©velopp√© par l‚Äôagence digitale R2. 

## Contribution

Les outils sont disponibles sur le Github de Skouerr

CLI :   
[https://github.com/skouerr/skouerr-cli](https://github.com/skouerr/skouerr-cli)

Scripts :   
[https://github.com/skouerr/skouerr-scripts](https://github.com/skouerr/skouerr-scripts)

Th√®me :  
[https://github.com/skouerr/skouerr-theme](https://github.com/skouerr/skouerr-theme)

Les pull request sont √©videment les bienvenue. Elles seront √©tudier par les d√©veloppeurs qui maintienne le d√©p√¥t de l‚Äô√©quipe r2

Si vous d√©tectez un bug, un probl√®me ou une √©volution potentielle, vous pouvez laisser une issue sur le projet GitHub correspondant

Si vous avez une question, n‚Äôh√©sitez pas √† contacter l‚Äô√©quipe √† cette adresse :   
support-skouerr@r2.fr 

## RoadMap

Une impl√©mentation OpenAI est pr√©vu afin de r√©diger la documentation du th√®me et des diff√©rents block

Une libraire de block est pr√©vu.

# Getting Started

## Setup roots/bedrock

La boilerplate roots/bedrock permet de g√©rer WordPress, ses plugins et th√®mes comme des d√©pendances PHP via un fichier composer.json tout en revoyant l‚Äôarchitecture des dossiers.

Pour rappel voici la commande pour cr√©er un projet bedrock 

composer create-project roots/bedrock

Une fois bedrock install√© pour travailler avec Skouerr , vous aller devoir ajouter dans les repositories du fichier composer.json ceci :

```json
{  
  "type": "composer",  
  "url": "https://packages.skouerr.dev",  
  "only": [  
    "skouerr/*"  
  ]
}
```


Puis lancer un composer validate pour √™tre sur de ne pas avoir fa√Æt d‚Äôerreur

Ensuite ajouter le mu plugin skouerr-cli

```bash
composer require skouerr/skouerr-cli
```

Bravo \! Vous avez installer la premi√®re pierre de skouerr

Pour cr√©er un th√®me, vous pouvez lancer cette commande : 

```bash
wp skouerr make:theme
```

Le th√®me sera activer par d√©faut \!

Pour commencer a cr√©er vos premiers blocks lancer cette commande üëç

```bash
wp skouerr make:block
```

Vous pouvez lister les commandes disponible

```bash
wp skouerr list
```

Une fois votre premier block cr√©er vous aller pouvoir compiler et recharger vos fichiers.  
Le th√®me Skouerr par d√©faut int√©gre Skouerr Script. 

Assurez-vous bien d‚Äôavoir la derni√®re version en lan√ßant cette commande dans le r√©pertoire du th√®me

```bash
npm install  
npm update
```

Une fois les d√©pendances JavaScript du th√®me mis √† jour et install√© pour lancer l‚Äôoutil lancer 

npm run watch 

Le script devrait lancer la compilation automatique et vous devriez voir apparaitre le statut de la compilation en bas a droite de votre √©cran

## Setup traditionnal wordpress

Pour travailler avec un Wordpress classique, il vous suffit de t√©l√©charger le plugin ici : 

De l‚Äôinstaller dans le dossier plugins ou mu-plugins 

Puis de suivre la documentation a partir d‚Äôici

# Theme

Le th√®me Skouerr est un th√®me Full Site Editing et donc repose sur les normes pos√© par Wordpress.  
Le style atomique des composants du th√®me doit √™tre d√©fini dans le fichier theme.json

## Loader

Afin de g√©r√©r les blocks cr√©er par la cli une class Skouerr\_Loader est d√©fini dans inc/core/loader, qui scanne ces dossiers afin de charger dynamiquement les diff√©rents √©l√©ments

- blocks/\*/\*.block.json  
- templates/\*.html  
- patterns/\*.php

// HOOK A AJOUTER ICI

## Render

Afin de d√©finir une norme et avoir meilleure clart√© du code ous avons d√©cid√© d‚Äôutiliser le pattern MVC pour la gestion des blocks.  
√âgalement nous avons la possibilit√© de g√©rer diff√©rents types de moteurs de template (PHP, Twig, React).

Ainsi Skouerr\_Block permet de g√©rer cela d‚Äôune mani√®re commune.

3 fonctions a retenir : 

```php
$skouerr_block->set_data(‚Äò‚Äô)
```

Cette fonction permet d‚Äôenvoyer une valeur au moteur de template

```php
$skouerr_block->the_data(‚Äò‚Äô)
```

Cette fonction permet de r√©cup√®re lorsque le moteur de template est PHP

```php
$skouerrr_block->render(‚Äòphp|twig|react‚Äô)
```

Cette fonction permet de choisir le moteur de rendu 

## Skouerr Mails

Skouerr permet une meilleure gestion des mails tout en r√©cup√©rant les valeurs d√©finit par dans le full site editing, ainsi, il est possible de cr√©er des templates personnalis√©s de mails avec Twig

Vous pouvez d√©finir et revoir vos templates dans /inc/mails/mails.php

## Custom blocks

Une des forces de Skouerr est de permettre aux d√©veloppeurs WordPress de continuer a r√©pondre aux besoin sp√©cifique de leur clients que les blocs Gutenberg basique ne peuvent pas r√©pondre.

Nous avons donc fait le choix de continuer de travailler avec le plugin ACF, tout en gardant les fonctionnalit√©s native

*Pour cr√©er des blocks avec Advanced Custom Field il est recommand√© de souscrire √† la licence ACF Pro*

Ainsi, nous mettons √† disposition des blocs pr√™ts √† d√©velopper sous plusieurs formats : 

Native \- PHP  
Native \- Twig  
ACF \- PHP  
ACF \- Twig

Les blocs ne vont pas contenir les m√™me fichiers, car un block ACF sera automatique enregistr√© par le plugin, alors qu‚Äôun block native doit charger le fichier register.js

√âgalement les blocs ACF g√®rent directement leur champs personnalis√©s dans le dossier /acf/

Ces blocs doivent √™tre con√ßus de mani√®re r√©utilisable entre les projets, ainsi il est tr√®s recommand√© de construire le style des block custom √† partir des variables CSS, ainsi que d‚Äôutiliser les classes communes de Worpdress

// Cr√©er bloc avec la CLI

La cr√©ation d‚Äôun bloc avec la CLI va prendre plusieurs param√®tres : 

- Type (ACF ou Native)  
- Template (PHP ou Twig)  
- Title  
- Name  
- Dashicon

Les param√®tres vous seront pos√© tout au long du processus : 

wp skouerr make:block

## Full Site Editing

Skouerr est un th√®me cr√©er pour √™tre enti√®rement compatible avec le Full Site Editing de Wordpress.

Ainsi, les compositions et templates seront g√©r√© via l‚Äô√©diteur de site.

Par d√©faut les compositions et templates sont enregistr√©s dans la base de donn√©e et donc, les modifications ne sont version√©.

Avec skouerr il est possible de synchroniser les templates et compositions gr√¢ce  √† la CLI, lancer la commande suivante et choisissez l‚Äô√©l√©ment a versionn√©.

```bash
wp skouerr sync:template
```

```bash
wp skouerr sync:patterns
```

# CLI

Skouerr repose sur 3 outils dont une interface en ligne de commande.  
Cette ligne de commande permet de cr√©er , g√©rer, et manipuler votre th√®me Wordpress.

Par d√©faut nous utilisons WP CLI mais nous lui avons ajouter une couche suppl√©mentaire avec Symfony Console permettant d‚Äôint√©ragir avec le d√©veloppeur.

Liste des commandes disponible 

wp skouerr list  
wp skouerr make:theme  
wp skouerr make:block  
wp skouerr list:blocks  
wp skouerr import:blocks  
wp skouerr make:post-type  
wp skouerr save:template  
wp skouerr make:template  
wp skouerr save:pattern

# Scripts javascript

Un package npm permet a Skouerr de faire fonctionner un module de rechargement automatique 

Il s‚Äôajoute avec 

npm install skouerr-scripts

et s‚Äôutilise comme une cli en ajoutant sont execution dans votre fichier package json

skouerr-scripts watch  
skouerr-scripts build

# Hooks

Pas de hook pour l‚Äôinstant